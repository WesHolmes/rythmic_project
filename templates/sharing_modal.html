<!-- Sharing Modal Component -->
<div id="sharing-modal" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 hidden">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="glass rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Modal Header -->
            <div class="flex items-center justify-between p-6 border-b border-gray-700">
                <h2 class="text-2xl font-bold text-white flex items-center">
                    <i class="fas fa-share-alt mr-3 text-blue-400"></i>
                    Share Project
                </h2>
                <div class="flex items-center space-x-3">
                    <button id="close-sharing-modal" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>

            <!-- Modal Content -->
            <div class="p-6">
                <!-- Sharing Options Tabs -->
                <div class="flex space-x-1 bg-gray-800/50 rounded-lg p-1 mb-6">
                    <button id="tab-email" class="sharing-tab active flex-1 px-2 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-all duration-200">
                        <i class="fas fa-envelope mr-1 sm:mr-2"></i><span class="hidden sm:inline">Email</span><span class="sm:hidden">@</span>
                    </button>
                    <button id="tab-link" class="sharing-tab flex-1 px-2 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-all duration-200">
                        <i class="fas fa-link mr-1 sm:mr-2"></i><span class="hidden sm:inline">Link</span><span class="sm:hidden">ðŸ”—</span>
                    </button>
                    <button id="tab-text" class="sharing-tab flex-1 px-2 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-all duration-200">
                        <i class="fas fa-sms mr-1 sm:mr-2"></i><span class="hidden sm:inline">Text</span><span class="sm:hidden">ðŸ’¬</span>
                    </button>
                </div>

                <!-- Email Sharing Panel -->
                <div id="panel-email" class="sharing-panel">
                    <form id="email-sharing-form">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Email Address
                                </label>
                                <input type="email" id="share-email" required
                                    class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="colleague@example.com">
                                <p class="text-sm text-gray-400 mt-2">
                                    <i class="fas fa-info-circle mr-1"></i>
                                    If this email has an existing account, they'll be added directly. Otherwise, they'll receive an invitation email.
                                </p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Role
                                </label>
                                <select id="share-role-email" 
                                    class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="viewer">Viewer - Can view project and tasks</option>
                                    <option value="editor">Editor - Can edit tasks and create new ones</option>
                                    <option value="admin">Admin - Can manage project settings and collaborators</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Personal Message (Optional)
                                </label>
                                <textarea id="share-message" rows="3"
                                    class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="Add a personal message to your invitation..."></textarea>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Expiration
                                </label>
                                <select id="share-expiration-email"
                                    class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="24">24 hours</option>
                                    <option value="72">3 days</option>
                                    <option value="168">1 week</option>
                                    <option value="720">30 days</option>
                                </select>
                            </div>
                        </div>

                        <div class="flex justify-end space-x-3 mt-6">
                            <button type="button" id="cancel-email-share" 
                                class="px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors">
                                Cancel
                            </button>
                            <button type="submit" 
                                class="px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-lg font-medium transition-all duration-200 shadow-lg">
                                <i class="fas fa-paper-plane mr-2"></i>Send Invitation
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Link Sharing Panel -->
                <div id="panel-link" class="sharing-panel hidden">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">
                                Role for Link Recipients
                            </label>
                            <select id="share-role-link"
                                class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="viewer">Viewer - Can view project and tasks</option>
                                <option value="editor">Editor - Can edit tasks and create new ones</option>
                                <option value="admin">Admin - Can manage project settings and collaborators</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">
                                Expiration
                            </label>
                            <select id="share-expiration-link"
                                class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="24">24 hours</option>
                                <option value="72">3 days</option>
                                <option value="168">1 week</option>
                                <option value="720">30 days</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">
                                Maximum Uses
                            </label>
                            <select id="share-max-uses"
                                class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="1">Single use</option>
                                <option value="5">5 uses</option>
                                <option value="10">10 uses</option>
                                <option value="25">25 uses</option>
                                <option value="-1">Unlimited</option>
                            </select>
                        </div>

                        <!-- Generated Link Display -->
                        <div id="generated-link-container" class="hidden">
                            <label class="block text-sm font-medium text-gray-300 mb-2">
                                Sharing Link
                            </label>
                            <div class="flex items-center space-x-2">
                                <input type="text" id="generated-link" readonly
                                    class="flex-1 px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <button type="button" id="copy-link-btn"
                                    class="px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <p class="text-sm text-gray-400 mt-2">
                                <i class="fas fa-info-circle mr-1"></i>
                                Link expires in <span id="link-expiry-text"></span> and can be used <span id="link-uses-text"></span>
                            </p>
                        </div>

                        <div class="flex justify-end space-x-3 mt-6">
                            <button type="button" id="cancel-link-share"
                                class="px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors">
                                Cancel
                            </button>
                            <button type="button" id="generate-link-btn"
                                class="px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white rounded-lg font-medium transition-all duration-200 shadow-lg">
                                <i class="fas fa-link mr-2"></i>Generate Link
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Text Sharing Panel -->
                <div id="panel-text" class="sharing-panel hidden">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">
                                Role for Recipients
                            </label>
                            <select id="share-role-text"
                                class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="viewer">Viewer - Can view project and tasks</option>
                                <option value="editor">Editor - Can edit tasks and create new ones</option>
                                <option value="admin">Admin - Can manage project settings and collaborators</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">
                                Expiration
                            </label>
                            <select id="share-expiration-text"
                                class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="24">24 hours</option>
                                <option value="72">3 days</option>
                                <option value="168">1 week</option>
                                <option value="720">30 days</option>
                            </select>
                        </div>

                        <!-- Generated Text Message -->
                        <div id="generated-text-container" class="hidden">
                            <label class="block text-sm font-medium text-gray-300 mb-2">
                                Text Message
                            </label>
                            <div class="bg-gray-800 border border-gray-600 rounded-lg p-4">
                                <p id="generated-text-message" class="text-white text-sm leading-relaxed"></p>
                            </div>
                            <div class="flex items-center space-x-2 mt-3">
                                <button type="button" id="copy-text-btn"
                                    class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors">
                                    <i class="fas fa-copy mr-2"></i>Copy Message
                                </button>
                                <button type="button" id="send-sms-btn"
                                    class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors">
                                    <i class="fas fa-sms mr-2"></i>Send SMS
                                </button>
                            </div>
                        </div>

                        <div class="flex justify-end space-x-3 mt-6">
                            <button type="button" id="cancel-text-share"
                                class="px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors">
                                Cancel
                            </button>
                            <button type="button" id="generate-text-btn"
                                class="px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-lg font-medium transition-all duration-200 shadow-lg">
                                <i class="fas fa-comment mr-2"></i>Generate Message
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>